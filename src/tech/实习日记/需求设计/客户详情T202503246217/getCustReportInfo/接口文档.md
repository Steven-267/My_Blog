---
icon: pen-to-square
date: 2025-4-18
category:
- 后端
tag:
- 实习
---
# 接口文档

### 1. **接收参数**：

- **custNo**：客户编号（必填）

### 2. **查询字段**：

根据 `proposalType` 和 `pp_state` 来查询不同的报告。查询时间范围是过去30天，包括当天。

#### **收集的数据项：**

1. **近30天财富诊断报告：**
   - `proposalType=5`
     - **产品化**：查询最近30天内，状态为完成（`pp_state=1`）的报告。
     - **国新个性化**：无数据。
2. **近30天持仓规划报告：**
   - `proposalType=4`
     - **产品化**：查询最近30天内，理财经理完成的、状态为完成（`pp_state=1`）、过期（`pp_state=4）、终止跟踪（`pp_state=6`）的持仓规划报告。
     - **国新个性化**：查询最近30天内，客户在APP端创建并完成的报告，`pp_state=1`，`proposalSource=2`（与客户自主创建方案数据一致）。
3. **近30天全新规划报告：**
   - `proposalType=2`
     - **产品化**：查询最近30天内，理财经理完成的、状态为完成（`pp_state=1`）、过期（`pp_state=4`）、终止跟踪（`pp_state=6`）的全新规划报告。
     - **国新个性化**：查询最近30天内，客户在APP端创建并完成的报告，`pp_state=1`，`proposalSource=2`（与客户自主创建方案数据一致）。
4. **最近一次财富诊断报告日期：**
   - `proposalType=5`
     - **产品化**：查询最近一次状态为完成（`pp_state=1`）的财富诊断报告的日期。
     - **国新个性化**：无数据。
5. **最近一次持仓规划报告日期：**
   - `proposalType=4`
     - **产品化**：查询最近一次理财经理完成的、状态为完成（`pp_state=1`）、过期（`pp_state=4`）、终止跟踪（`pp_state=6`）的持仓规划报告日期。
     - **国新个性化**：查询客户最近一次在APP端创建并完成的报告，`pp_state=1`，`proposalSource=2`。
6. **最近一次全新规划报告日期：**
   - `proposalType=2`
     - **产品化**：查询最近一次理财经理完成的、状态为完成（`pp_state=1`）、过期（`pp_state=4`）、终止跟踪（`pp_state=6`）的全新规划报告日期。
     - **国新个性化**：查询客户最近一次在APP端创建并完成的报告，`pp_state=1`，`proposalSource=2`。

### ✅ **接口文档汇总：**

#### **接口路径**：

- `/wealth/customer/getCustReportInfo`

#### **请求方式**：

- `POST`

#### **请求参数**：

| 参数名   | 类型   | 是否必填 | 描述                 |
| -------- | ------ | -------- | -------------------- |
| `custNo` | string | 是       | 客户编号（唯一标识） |

代码内部根据`tenantCode`    租户编号（默认为 `default`）进行租户隔离

#### **返回参数**：

```json
{
    "status": "0000",
    "statusMsg": "操作成功",
    "data": {
        "lastThirtyAccountNunber": 0,  // 近30天财富诊断报告数量
        "lastThirtyNewNunber": 0,      // 近30天全新规划报告数量
        "lastThirtyHoldNunber": 0,     // 近30天持仓规划报告数量
        "lastAccountDate": "2024-01-03", // 最近一次财富诊断报告日期
        "lastNewDate": "2024-01-03",    // 最近一次全新规划报告日期
        "lastHoldDate": "2024-01-03"    // 最近一次持仓规划报告日期
    }
}
```

------

